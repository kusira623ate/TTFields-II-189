<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TTFields in Cell Division - MSD Analysis</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-blue: #1a237e;
            --secondary-blue: #283593;
            --accent-blue: #3949ab;
            --light-blue: #e8eaf6;
            --background: #f5f9fc;
            --text: #333333;
            --white: #ffffff;
            --gray: #e0e0e0;
            --shadow: rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--background);
            color: var(--text);
            line-height: 1.6;
            padding: 0;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 40px 0;
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--secondary-blue) 100%);
            color: var(--white);
            margin-bottom: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 12px var(--shadow);
        }

        h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .subtitle {
            font-size: 1.3rem;
            opacity: 0.95;
            margin-bottom: 25px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .tagline {
            font-size: 1.1rem;
            background-color: rgba(255, 255, 255, 0.1);
            padding: 12px 25px;
            border-radius: 50px;
            display: inline-block;
            margin-top: 15px;
        }

        .wall-conditions {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 25px;
            margin: 40px 0;
        }

        .condition-card {
            background: var(--white);
            border-radius: 12px;
            padding: 25px 30px;
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-blue);
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 12px var(--shadow);
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 220px;
            border: 3px solid transparent;
        }

        .condition-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 20px rgba(0, 0, 0, 0.15);
            border-color: var(--accent-blue);
            background-color: var(--light-blue);
        }

        .condition-card i {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--accent-blue);
        }

        .condition-card .card-description {
            font-size: 0.9rem;
            font-weight: normal;
            color: #666;
            margin-top: 10px;
            text-align: center;
            line-height: 1.4;
        }

        .main-content {
            display: none;
        }

        .main-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .back-section {
            margin-bottom: 30px;
        }

        .back-btn {
            background-color: var(--accent-blue);
            color: var(--white);
            border: none;
            border-radius: 8px;
            padding: 12px 25px;
            font-size: 1.1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: background-color 0.3s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .back-btn:hover {
            background-color: var(--secondary-blue);
        }

        .condition-description {
            background-color: var(--white);
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 4px 10px var(--shadow);
        }

        .condition-description h2 {
            color: var(--primary-blue);
            margin-bottom: 20px;
            border-bottom: 3px solid var(--light-blue);
            padding-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .condition-description h2 i {
            color: var(--accent-blue);
        }

        .condition-description p {
            margin-bottom: 20px;
            line-height: 1.7;
            font-size: 1.05rem;
        }

        .condition-description .highlight {
            background-color: var(--light-blue);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--accent-blue);
            margin: 25px 0;
        }

        .data-table-container {
            background-color: var(--white);
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 10px var(--shadow);
            overflow-x: auto;
            margin-bottom: 50px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        th {
            background-color: var(--primary-blue);
            color: var(--white);
            font-weight: 600;
            text-align: center;
            padding: 18px 12px;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        td {
            border: 1px solid var(--gray);
            padding: 18px 12px;
            text-align: center;
            vertical-align: middle;
        }

        .phase-cell {
            background-color: #f9f9f9;
            font-weight: 700;
            color: var(--primary-blue);
            min-width: 140px;
            font-size: 1.1rem;
        }

        .image-container {
            width: 200px;
            height: 150px;
            margin: 0 auto;
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid var(--gray);
            background-color: #f9f9f9;
            transition: all 0.3s ease;
        }

        .image-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            border-color: var(--accent-blue);
        }

        .table-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            cursor: pointer;
        }

        .image-loading {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #888;
        }

        .image-loading i {
            font-size: 2rem;
            margin-bottom: 10px;
            color: #aaa;
            animation: spin 1.5s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .image-error {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: #ffebee;
            color: #c62828;
            padding: 15px;
            text-align: center;
        }

        .image-error i {
            font-size: 2rem;
            margin-bottom: 10px;
            color: #ef5350;
        }

        .image-label {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: rgba(26, 35, 126, 0.9);
            color: white;
            padding: 8px;
            font-size: 0.85rem;
            text-align: center;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .image-container:hover .image-label {
            opacity: 1;
        }

        .image-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            max-width: 90%;
            max-height: 90%;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .close-modal {
            position: absolute;
            top: 25px;
            right: 35px;
            color: white;
            font-size: 3rem;
            cursor: pointer;
            transition: color 0.2s;
        }

        .close-modal:hover {
            color: #ff5252;
        }

        .image-info {
            position: absolute;
            bottom: 25px;
            left: 0;
            width: 100%;
            text-align: center;
            color: white;
            padding: 15px;
            background-color: rgba(0, 0, 0, 0.8);
            font-size: 1rem;
        }

        .footer {
            text-align: center;
            padding: 30px;
            margin-top: 50px;
            color: #666;
            border-top: 1px solid var(--gray);
        }

        .footer a {
            color: var(--accent-blue);
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        .file-name-display {
            font-size: 0.75rem;
            color: #666;
            margin-top: 5px;
            font-family: monospace;
            word-break: break-all;
            text-align: center;
        }

        /* Responsive adjustments */
        @media (max-width: 1200px) {
            .container {
                max-width: 95%;
            }
        }

        @media (max-width: 992px) {
            h1 {
                font-size: 2.2rem;
            }
            
            .condition-card {
                width: 180px;
                padding: 20px;
            }
            
            .condition-card i {
                font-size: 2rem;
            }
            
            .image-container {
                width: 160px;
                height: 120px;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .subtitle {
                font-size: 1.1rem;
            }
            
            .wall-conditions {
                gap: 15px;
            }
            
            .condition-card {
                width: 150px;
                padding: 15px;
                font-size: 1rem;
            }
            
            .condition-card i {
                font-size: 1.8rem;
            }
            
            .condition-description {
                padding: 20px;
            }
            
            .data-table-container {
                padding: 15px;
            }
            
            th, td {
                padding: 12px 8px;
                font-size: 0.9rem;
            }
            
            .phase-cell {
                min-width: 100px;
            }
            
            .image-container {
                width: 130px;
                height: 100px;
            }
            
            .file-name-display {
                font-size: 0.65rem;
            }
        }

        @media (max-width: 576px) {
            header {
                padding: 30px 15px;
            }
            
            h1 {
                font-size: 1.6rem;
            }
            
            .tagline {
                font-size: 0.9rem;
                padding: 8px 15px;
            }
            
            .condition-card {
                width: 100%;
                max-width: 250px;
                flex-direction: row;
                justify-content: flex-start;
                text-align: left;
                padding: 15px 20px;
            }
            
            .condition-card i {
                margin-bottom: 0;
                margin-right: 15px;
            }
            
            .card-description {
                display: none;
            }
            
            .condition-description h2 {
                font-size: 1.4rem;
            }
            
            .data-table-container {
                padding: 10px;
            }
            
            table {
                display: block;
                overflow-x: auto;
            }
            
            .image-container {
                width: 110px;
                height: 85px;
            }
            
            .file-name-display {
                font-size: 0.6rem;
            }
        }

        @media (max-width: 480px) {
            .condition-card {
                max-width: 100%;
            }
            
            .condition-description p {
                font-size: 0.95rem;
            }
            
            .image-container {
                width: 90px;
                height: 70px;
            }
            
            .image-label {
                font-size: 0.7rem;
                padding: 5px;
            }
            
            .close-modal {
                top: 15px;
                right: 20px;
                font-size: 2.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Home Page -->
        <header id="home-page">
            <h1>TTFields in Cell Division</h1>
            <p class="subtitle">Mean Square Displacement Analysis Across Mitotic Phases Under Different Boundary Conditions</p>
            <p class="tagline">Explore how Tumor Treating Fields affect intracellular particle dynamics</p>
            
            <div class="wall-conditions">
                <div class="condition-card" data-condition="bounce">
                    <i class="fas fa-arrows-alt-h"></i>
                    <span>Bounce Condition</span>
                    <div class="card-description">Elastic reflection at boundaries</div>
                </div>
                
                <div class="condition-card" data-condition="disappear">
                    <i class="fas fa-eye-slash"></i>
                    <span>Disappear Condition</span>
                    <div class="card-description">Particle absorption at boundaries</div>
                </div>
                
                <div class="condition-card" data-condition="isotropic">
                    <i class="fas fa-expand-arrows-alt"></i>
                    <span>Isotropic Scattering</span>
                    <div class="card-description">Random directional reflection</div>
                </div>
            </div>
        </header>

        <!-- Main Content Area (hidden by default) -->
        <div class="main-content" id="main-content">
            <div class="back-section">
                <button class="back-btn" id="back-btn">
                    <i class="fas fa-arrow-left"></i> Back to Conditions
                </button>
            </div>

            <div class="condition-description" id="condition-description">
                <!-- Condition description will be loaded here -->
            </div>

            <div class="data-table-container">
                <table id="data-table">
                    <thead>
                        <tr>
                            // <th>Cell Division Phase</th>
                            <th class="valign-middle">Cell Division Phase</th>
                            <th colspan="2">Without Electric Field</th>
                            <th colspan="2">With Electric Field (TTFields)</th>
                        </tr>
                        <tr>
                            <th></th>
                            <th>MSD vs Time</th>
                            <th>MSD vs Particle Count<br><small>(Convergence at t=500μs)</small></th>
                            <th>MSD vs Time</th>
                            <th>MSD vs Particle Count<br><small>(Convergence at t=500μs)</small></th>
                        </tr>
                    </thead>
                    <tbody id="table-body">
                        <!-- Table rows will be generated here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Image Modal -->
        <div class="image-modal" id="image-modal">
            <span class="close-modal" id="close-modal">&times;</span>
            <img class="modal-content" id="modal-image" src="" alt="Full size image">
            <div class="image-info" id="image-info"></div>
        </div>

        <!-- Footer -->
        <div class="footer" id="footer">
            <p>TTFields in Cell Division - Mean Square Displacement Analysis</p>
            <p>Simulation data from COMSOL Particle Tracing Module | Hosted on GitHub Pages</p>
            <p>For research purposes only | Last updated: <span id="current-date"></span></p>
        </div>
    </div>

    <script>
        // Set current date in footer
        document.getElementById('current-date').textContent = new Date().toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });

        // Condition descriptions
        const conditionDescriptions = {
            bounce: `
                <h2><i class="fas fa-arrows-alt-h"></i> Bounce Boundary Condition</h2>
                <p>In the <strong>Bounce condition</strong>, particles undergo elastic reflection when they encounter a boundary. This means:</p>
                
                <div class="highlight">
                    <p><strong>Key Characteristics:</strong></p>
                    <ul style="margin-left: 20px;">
                        <li>Conservation of kinetic energy during collision</li>
                        <li>Momentum reversal in the normal direction to the wall</li>
                        <li>Tangential momentum may be affected by friction coefficients</li>
                        <li>No particle loss at boundaries</li>
                    </ul>
                </div>
                
                <p>In the context of TTFields (Tumor Treating Fields) and intracellular particle dynamics during cell division, this condition models cellular components that are repelled by membranes or structural elements. The bounce condition is particularly relevant for modeling:</p>
                
                <ul style="margin-left: 20px; margin-bottom: 20px;">
                    <li>Organelles interacting with the nuclear envelope</li>
                    <li>Protein complexes interacting with microtubules</li>
                    <li>Vesicles encountering cell membrane during cytokinesis</li>
                </ul>
                
                <p>This simulation uses the "Bounce" feature from COMSOL's Particle Tracing for Fluid Flow module, which provides accurate modeling of elastic collisions in complex geometries.</p>
            `,
            
            disappear: `
                <h2><i class="fas fa-eye-slash"></i> Disappear Boundary Condition</h2>
                <p>In the <strong>Disappear condition</strong>, particles are immediately removed from the simulation when they encounter a specified boundary. This models:</p>
                
                <div class="highlight">
                    <p><strong>Key Characteristics:</strong></p>
                    <ul style="margin-left: 20px;">
                        <li>Instantaneous particle removal upon boundary contact</li>
                        <li>Models absorption or degradation processes</li>
                        <li>Computationally efficient for large particle counts</li>
                        <li>Useful for modeling sinks or exits in the domain</li>
                    </ul>
                </div>
                
                <p>In intracellular simulations during mitosis, the disappear condition can represent:</p>
                
                <ul style="margin-left: 20px; margin-bottom: 20px;">
                    <li>Protein degradation at proteasomes</li>
                    <li>Nutrient uptake at membrane transporters</li>
                    <li>Signal molecule binding to receptors</li>
                    <li>Particle exit from region of interest</li>
                </ul>
                
                <p>This boundary condition is implemented using the "Disappear" feature in COMSOL, which terminates particle trajectories when specific boundaries are reached, effectively modeling consumption or exit processes.</p>
            `,
            
            isotropic: `
                <h2><i class="fas fa-expand-arrows-alt"></i> Isotropic Scattering Condition</h2>
                <p>In the <strong>Isotropic Scattering condition</strong>, particles reflect from boundaries with completely random directional distribution. This means:</p>
                
                <div class="highlight">
                    <p><strong>Key Characteristics:</strong></p>
                    <ul style="margin-left: 20px;">
                        <li>Random reflection direction over the hemisphere facing away from the wall</li>
                        <li>No preferred reflection angle (isotropic distribution)</li>
                        <li>Models perfectly diffuse scattering</li>
                        <li>Energy conservation depends on additional parameters</li>
                    </ul>
                </div>
                
                <p>For intracellular particle dynamics during cell division under TTFields, isotropic scattering models:</p>
                
                <ul style="margin-left: 20px; margin-bottom: 20px;">
                    <li>Interactions with rough or disordered intracellular structures</li>
                    <li>Collisions with complex cytoskeletal networks</li>
                    <li>Particle interactions in crowded cytoplasmic environments</li>
                    <li>Diffuse reflection from organelle surfaces</li>
                </ul>
                
                <p>The isotropic scattering condition uses COMSOL's capability to randomize particle direction after boundary contact, simulating the effect of surface roughness or complex interaction geometries at scales smaller than the simulation resolution.</p>
            `
        };

        // Cell division phases
        const phases = [
            {id: "interphase", name: "Interphase"},
            {id: "prophase", name: "Prophase"}, 
            {id: "metaphase", name: "Metaphase"},
            {id: "anaphase", name: "Anaphase"},
            {id: "telophase", name: "Telophase"}
        ];

        // Function to generate the correct file name based on your original naming convention
        function getImageFileName(condition, phase, hasElectricField, isTimeGraph) {
            // Based on your examples:
            // MSD vs Time: "msd_anaphase_bounce_E0_1JFF_msdVtime.png" (for without EF)
            // MSD vs Particle Count: "sd-last_anaphase_bounce_E0_1JFF_msd_variation.png" (for without EF)
            
            // Note: In your example, you mentioned:
            // - "msd_anaphase_bounce_E_1JFF_msdVtime" (with EF)
            // - "sd-last_anaphase_bounce_E_1JFF_msd_variation" (with EF)
            // - For without EF, it would be E0_1JFF instead of E_1JFF
            
            // const efSuffix = hasElectricField ? "E_1JFF" : "E0";
            const efSuffix = hasElectricField ? "E_1JFF" : "E0_1JFF";
            
            if (isTimeGraph) {
                return `msd_${phase}_${condition}_${efSuffix}_msdVtime.png`;
            } else {
                return `sd-last_${phase}_${condition}_${efSuffix}_msd_variation.png`;
            }
        }

        // Function to get image URL based on repository structure
        function getImageUrl(condition, phase, hasElectricField, isTimeGraph) {
            // Base path for images - relative to the HTML file
            const basePath = "images";
            
            // Convert boolean parameters to string representations
            const efFolder = hasElectricField ? "with_EF" : "without_EF";
            
            // Get the file name using your original naming convention
            const fileName = getImageFileName(condition, phase, hasElectricField, isTimeGraph);
            
            // Construct the full path
            return `${basePath}/${condition}/${phase}/${efFolder}/${fileName}`;
        }

        // DOM Elements
        const homePage = document.getElementById('home-page');
        const mainContent = document.getElementById('main-content');
        const conditionDescriptionDiv = document.getElementById('condition-description');
        const tableBody = document.getElementById('table-body');
        const conditionCards = document.querySelectorAll('.condition-card');
        const backBtn = document.getElementById('back-btn');
        const imageModal = document.getElementById('image-modal');
        const modalImage = document.getElementById('modal-image');
        const closeModal = document.getElementById('close-modal');
        const imageInfo = document.getElementById('image-info');
        const footer = document.getElementById('footer');

        // Current selected condition
        let currentCondition = null;

        // Function to show a wall condition
        function showCondition(condition) {
            currentCondition = condition;
            
            // Update UI
            homePage.style.display = 'none';
            mainContent.classList.add('active');
            footer.style.marginTop = '20px';
            
            // Set condition description
            conditionDescriptionDiv.innerHTML = conditionDescriptions[condition];
            
            // Generate table
            generateTable(condition);
            
            // Scroll to top of main content
            mainContent.scrollIntoView({ behavior: 'smooth' });
        }

        // Function to generate the data table
        function generateTable(condition) {
            tableBody.innerHTML = '';
            
            phases.forEach(phase => {
                const row = document.createElement('tr');
                
                // Phase cell
                const phaseCell = document.createElement('td');
                phaseCell.className = 'phase-cell';
                phaseCell.innerHTML = `<strong>${phase.name}</strong>`;
                row.appendChild(phaseCell);
                
                // Create cells for each image type
                const imageConfigs = [
                    { hasElectricField: false, isTimeGraph: true, label: 'MSD vs Time (No EF)' },
                    { hasElectricField: false, isTimeGraph: false, label: 'MSD vs Particle Count (No EF)' },
                    { hasElectricField: true, isTimeGraph: true, label: 'MSD vs Time (With TTFields)' },
                    { hasElectricField: true, isTimeGraph: false, label: 'MSD vs Particle Count (With TTFields)' }
                ];
                
                imageConfigs.forEach(config => {
                    const cell = document.createElement('td');
                    const container = document.createElement('div');
                    container.className = 'image-container';
                    
                    // Get image URL
                    const imageUrl = getImageUrl(condition, phase.id, config.hasElectricField, config.isTimeGraph);
                    
                    // Get file name for display
                    const fileName = getImageFileName(condition, phase.id, config.hasElectricField, config.isTimeGraph);
                    
                    // Create loading indicator
                    const loadingDiv = document.createElement('div');
                    loadingDiv.className = 'image-loading';
                    loadingDiv.innerHTML = '<i class="fas fa-spinner"></i><span>Loading...</span>';
                    container.appendChild(loadingDiv);
                    
                    // Create image element
                    const img = new Image();
                    img.className = 'table-image';
                    img.alt = `${condition} ${phase.name} ${config.label}`;
                    
                    // Image load event
                    img.onload = function() {
                        container.innerHTML = '';
                        container.appendChild(img);
                        
                        // Add label
                        const label = document.createElement('div');
                        label.className = 'image-label';
                        label.textContent = config.label;
                        container.appendChild(label);
                        
                        // Add file name display below image container
                        const fileNameDisplay = document.createElement('div');
                        fileNameDisplay.className = 'file-name-display';
                        fileNameDisplay.textContent = fileName;
                        cell.appendChild(fileNameDisplay);
                        
                        // Add click event
                        container.addEventListener('click', () => {
                            modalImage.src = imageUrl;
                            imageInfo.textContent = `${condition.toUpperCase()} | ${phase.name} | ${config.hasElectricField ? 'With TTFields' : 'No Electric Field'} | ${config.isTimeGraph ? 'MSD vs Time' : 'MSD vs Particle Count'}`;
                            imageModal.style.display = 'flex';
                        });
                    };
                    
                    // Image error event
                    img.onerror = function() {
                        container.innerHTML = '';
                        const errorDiv = document.createElement('div');
                        errorDiv.className = 'image-error';
                        errorDiv.innerHTML = `
                            <i class="fas fa-exclamation-triangle"></i>
                            <div>Image not found</div>
                            <small>${fileName}</small>
                        `;
                        container.appendChild(errorDiv);
                        
                        // Add file name display below error container
                        const fileNameDisplay = document.createElement('div');
                        fileNameDisplay.className = 'file-name-display';
                        fileNameDisplay.textContent = `Expected: ${fileName}`;
                        cell.appendChild(fileNameDisplay);
                    };
                    
                    // Start loading the image
                    img.src = imageUrl;
                    
                    cell.appendChild(container);
                    row.appendChild(cell);
                });
                
                tableBody.appendChild(row);
            });
        }

        // Function to return to home page
        function returnToHome() {
            homePage.style.display = 'block';
            mainContent.classList.remove('active');
            footer.style.marginTop = '50px';
            currentCondition = null;
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Event Listeners for Condition Cards
        conditionCards.forEach(card => {
            card.addEventListener('click', () => {
                const condition = card.getAttribute('data-condition');
                showCondition(condition);
            });
        });

        // Back button event listener
        backBtn.addEventListener('click', returnToHome);

        // Modal event listeners
        closeModal.addEventListener('click', () => {
            imageModal.style.display = 'none';
        });

        imageModal.addEventListener('click', (e) => {
            if (e.target === imageModal) {
                imageModal.style.display = 'none';
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && imageModal.style.display === 'flex') {
                imageModal.style.display = 'none';
            }
        });

        // Initialize
        console.log("TTFields Cell Division Visualizer initialized.");
        console.log("Using original file naming convention:");
        console.log("- MSD vs Time: msd_{phase}_{condition}_{EF}_msdVtime.png");
        console.log("- MSD vs Particle Count: sd-last_{phase}_{condition}_{EF}_msd_variation.png");
        console.log("Where EF = E0_1JFF (without electric field) or E_1JFF (with electric field)");
        
        // Add keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && currentCondition) {
                returnToHome();
            }
        });
    </script>
</body>
</html>
